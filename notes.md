# what I did for this project

I started and struggled with this because I was out of my ADHD meds so I wasn’t thinking right but during that time I tried to split up the line in a read from a text file with emails in it and I set up the root check and the usage functions because we had them done already.  I also set up the arguments that are supposed to be received for this script.  

Now that I have my meds I can think more clearly about this project and I started by making sure the read takes the entire line containing the email and I looked up how to handle strings with bash scripts (https://www.baeldung.com/linux/bash-string-manipulation and https://tldp.org/LDP/abs/html/string-manipulation.html were two sites I used to understand it) and I set up two variable to grab and hold the username and domain from the email. 

The next thing I did was I looked up how to find linux users  and found some code I didn’t understand so I relooked at the redirection chapter of the book to figure out ">&" and I remembered dev/null is a junk place to put things so it was storing the error and output of the id command on the username and if looks at exit codes so I don’t use "[ ]" around a thing to evaluate and since if the id exits successfully the if will return as true and if the id doesn’t exist it will return false to the if.  This lets me check for if the user exists already.  

The next thing I did was lookup how to install openssl so I could use the rand function to generate a password for the new user, once I had openssl installed it was easy to use the rand command (but I did use the rand docs  https://www.openssl.org/docs/man1.0.2/man1/rand.html) to generate the password.

  Then I looked back at the useradd and chpasswd command for how to make the new user with the home directory and then set the password to the random gen password.  I found out usermod is used to change the default shell (because it sets it not to /bin/bash by default) and made sure the user gets set to the right shell.  

Then I looked up the documentation for the chage command that was mentioned on the spec sheet and figured out how to set the password change requirements.  

The next thing I did was I tried to figure out how to make a group and where to check what groups exist.  I found where groups are stored and did a read command on it and compared the existing groups to the name of the group I want and if the group exists then nothing happens but if the group doesn’t it makes the group.  I also added the part that adds the new or existing user to the group.  

The last thing that I did was get the email working.  I futsed with sSMTP for a long time trying to pipe things into it to get the email to send and prompt the user for their email login bit that got me nowhere and I meddled for hours.  Then while searching documentation for sSMTP I found two things one was I had a misspelling that was messing things up but also I found the -c command that lets you use a custom config file so I tried to make a here script to generate the file but it kept giving me issues so I wound up copying the existing config file through echo statements to a file and before that it prompts for user login info for the email to send from and then that gets echoed to a temporary config file.  From there I have the program output the formatted message with the password to another temporary file.  With these two things I was able to successfully use sSMTP to send the email containing the password by inserting the message into the sSMTP command.  Then the system lets you know that the email was sent and deletes the temporary files.  
